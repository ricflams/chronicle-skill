<!-- ============================================================ -->
<!-- CHRONICLE: INSTITUTIONAL MEMORY SYSTEM                       -->
<!-- Generated by: chronicle skill v2.0.0                         -->
<!-- Philosophy: Decisions are timeless, lessons fade, sessions   -->
<!--             are ephemeral                                    -->
<!-- ============================================================ -->

## Chronicle System

### Context Loading

**Always load at session start:**
- `.chronicle/truth.md` - Project DNA
- `.chronicle/principles.md` - Enduring beliefs

**On session start:**
- Scan `.chronicle/lessons/` directory (read frontmatter of recent 10)
- Scan `.chronicle/sessions/` directory (read frontmatter of recent 5)
- Check if any lessons match current work area (by tags) → load full content

**Before modifying code:**
- Check lessons/ for files with matching tags (performance, database, architecture, etc.)
- Load relevant lessons to avoid repeating mistakes

**When making decisions:**
- Scan decisions/ directory for related ADRs
- Reference existing ADRs in new decisions when relevant

### Principle Recognition

**Auto-capture when user uses declarative language:**
- "We always...", "We never...", "From now on...", "As a rule...", "Going forward..."
- Add to principles.md immediately
- Notify: "Added principle: [X]. Say 'that's not a principle' to undo."

**Propose when pattern detected:**
- Same choice made across 2+ decisions or lessons
- Ask: "This seems like an emerging principle: [X]. Add to principles.md?"

**Principle format:**
- Natural language with tradeoff always stated
- Keep sparse: suggest consolidation if >25 principles

### Session Logging

**Maintain running session file:**
- Format: `.chronicle/sessions/YYYYMMDD-HHMM-slug.md`
- Auto-append significant events: decisions, problems, direction changes
- New file on date change or 4+ hour inactivity gap

**Prompt after substantive work:**
- "Should I log this session?" (user confirms)
- Create minimal narrative (~100-200 tokens)

### Archival Protocol (Automatic)

**Before writing to sessions/ or lessons/:

**Check archival conditions:**
- Today is Monday OR files exist >21 days old:
  → Archive sessions dated >14 days to `archive/sessions/`
- Today is 1st of month OR files exist >90 days old:
  → Archive lessons dated >60 days to `archive/lessons/`

**Execute archival:**
- Move files (no rename): `lessons/YYYYMMDD-file.md` → `archive/lessons/YYYYMMDD-file.md`
- Notify briefly: "Archived N sessions and M lessons. Undo: git checkout if needed."

### Document Creation Triggers

**Create ADR (decisions/YYYYMMDD-HHMM-slug.md) when:**
- Significant decision with alternatives considered
- User uses declarative language about decisions
- Choice will constrain many future decisions

**Create Lesson (lessons/YYYYMMDD-HHMM-slug.md) when:**
- Something fails or surprises
- Experiment completes (success or failure)
- User explicitly says "we learned..."
- Pattern worth remembering for team

**Session entry:**
- After substantive work session
- Prompt: "Log this session?" (user confirms format)

### File Naming Convention

All chronicle files use: `YYYYMMDD-HHMM-slug.md`
- Example: `20260208-1430-postgres-indexing-fix.md`
- Benefits: No collisions, chronological sort, self-documenting

### Token Budget Targets

- truth.md: ~1500-2000 tokens (compress when >2000)
- principles.md: ~700-1000 tokens (consolidate if >25 principles)
- Individual decisions: ~400 tokens
- Individual lessons: ~300 tokens
- Individual sessions: ~200 tokens

<!-- ============================================================ -->
<!-- END CHRONICLE SYSTEM                                         -->
<!-- ============================================================ -->
